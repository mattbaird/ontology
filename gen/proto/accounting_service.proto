// Code generated by cmd/apigen from CUE ontology. DO NOT EDIT.
syntax = "proto3";

package propeller.v1;

option go_package = "github.com/matthewbaird/ontology/gen/proto;propellerv1";

import "google/protobuf/timestamp.proto";

// ─── Common Types ────────────────────────────────────────────────────────────

message Money {
  int64 amount_cents = 1;
  string currency = 2; // ISO 4217
}

message Address {
  string line1 = 1;
  string line2 = 2;
  string city = 3;
  string state = 4;
  string postal_code = 5;
  string country = 6;
  double latitude = 7;
  double longitude = 8;
  string county = 9;
}

message DateRange {
  google.protobuf.Timestamp start = 1;
  google.protobuf.Timestamp end = 2;
}

message ContactMethod {
  string type = 1;
  string value = 2;
  bool primary = 3;
  bool verified = 4;
  bool opt_out = 5;
  string label = 6;
}

message SideEffect {
  string entity_type = 1;
  string entity_id = 2;
  string description = 3;
}

// ─── Entity Messages ─────────────────────────────────────────────────────────

message Account {
  string id = 1;
  string account_number = 2;
  string name = 3;
  string description = 4;
  string account_type = 5;
  string account_subtype = 6;
  string parent_account_id = 7;
  int64 depth = 8;
  string dimensions = 9;
  string normal_balance = 10;
  bool is_header = 11;
  bool is_system = 12;
  bool allows_direct_posting = 13;
  string status = 14;
  bool is_trust_account = 15;
  string trust_type = 16;
  Money budget_amount = 17;
  string tax_line = 18;
  google.protobuf.Timestamp created_at = 19;
  google.protobuf.Timestamp updated_at = 20;
  string created_by = 21;
  string updated_by = 22;
  string source = 23;
}

message BankAccount {
  string id = 1;
  string name = 2;
  string account_type = 3;
  string gl_account_id = 4;
  string bank_name = 5;
  string routing_number = 6;
  string account_number_last_four = 7;
  string portfolio_id = 8;
  string property_id = 9;
  string entity_id = 10;
  string status = 11;
  Money current_balance = 12;
  google.protobuf.Timestamp last_reconciled_at = 13;
  bool is_trust = 14;
  string trust_state = 15;
  bool commingling_allowed = 16;
  google.protobuf.Timestamp created_at = 17;
  google.protobuf.Timestamp updated_at = 18;
  string created_by = 19;
  string updated_by = 20;
  string source = 21;
}

message JournalEntry {
  string id = 1;
  google.protobuf.Timestamp entry_date = 2;
  google.protobuf.Timestamp posted_date = 3;
  string description = 4;
  string source_type = 5;
  string source_id = 6;
  string status = 7;
  string approved_by = 8;
  google.protobuf.Timestamp approved_at = 9;
  string batch_id = 10;
  string entity_id = 11;
  string property_id = 12;
  string reverses_journal_id = 13;
  string reversed_by_journal_id = 14;
  repeated string lines = 15;
  google.protobuf.Timestamp created_at = 16;
  google.protobuf.Timestamp updated_at = 17;
  string created_by = 18;
  string updated_by = 19;
  string source = 20;
}

message LedgerEntry {
  string id = 1;
  string account_id = 2;
  string entry_type = 3;
  Money amount = 4;
  string journal_entry_id = 5;
  google.protobuf.Timestamp effective_date = 6;
  google.protobuf.Timestamp posted_date = 7;
  string description = 8;
  string charge_code = 9;
  string memo = 10;
  string property_id = 11;
  string unit_id = 12;
  string lease_id = 13;
  string person_id = 14;
  string bank_account_id = 15;
  string bank_transaction_id = 16;
  bool reconciled = 17;
  string reconciliation_id = 18;
  google.protobuf.Timestamp reconciled_at = 19;
  string adjusts_entry_id = 20;
  google.protobuf.Timestamp created_at = 21;
  google.protobuf.Timestamp updated_at = 22;
  string created_by = 23;
  string updated_by = 24;
  string source = 25;
}

message Reconciliation {
  string id = 1;
  string bank_account_id = 2;
  google.protobuf.Timestamp period_start = 3;
  google.protobuf.Timestamp period_end = 4;
  Money statement_balance = 5;
  Money system_balance = 6;
  Money difference = 7;
  string status = 8;
  int64 matched_transaction_count = 9;
  int64 unmatched_transaction_count = 10;
  string completed_by = 11;
  google.protobuf.Timestamp completed_at = 12;
  string approved_by = 13;
  google.protobuf.Timestamp approved_at = 14;
  google.protobuf.Timestamp created_at = 15;
  google.protobuf.Timestamp updated_at = 16;
  string created_by = 17;
  string updated_by = 18;
  string source = 19;
}

// ─── Service Definition ──────────────────────────────────────────────────────

service AccountingService {
  // Create a new GL account
  rpc CreateAccount(CreateAccountRequest) returns (CreateAccountResponse);
  // Get GL account by ID
  rpc GetAccount(GetAccountRequest) returns (GetAccountResponse);
  // List GL accounts
  rpc ListAccounts(ListAccountsRequest) returns (ListAccountsResponse);
  // Update GL account
  rpc UpdateAccount(UpdateAccountRequest) returns (UpdateAccountResponse);
  // Get ledger entry by ID
  rpc GetLedgerEntry(GetLedgerEntryRequest) returns (GetLedgerEntryResponse);
  // List ledger entries with filtering
  rpc ListLedgerEntries(ListLedgerEntriesRequest) returns (ListLedgerEntriesResponse);
  // Create a new journal entry
  rpc CreateJournalEntry(CreateJournalEntryRequest) returns (CreateJournalEntryResponse);
  // Get journal entry by ID
  rpc GetJournalEntry(GetJournalEntryRequest) returns (GetJournalEntryResponse);
  // List journal entries
  rpc ListJournalEntries(ListJournalEntriesRequest) returns (ListJournalEntriesResponse);
  // Post a journal entry. Lines must balance (debits = credits)
  rpc PostJournalEntry(PostJournalEntryRequest) returns (PostJournalEntryResponse);
  // Void a posted journal entry. Creates reversal entry
  rpc VoidJournalEntry(VoidJournalEntryRequest) returns (VoidJournalEntryResponse);
  // Create a bank account
  rpc CreateBankAccount(CreateBankAccountRequest) returns (CreateBankAccountResponse);
  // Get bank account by ID
  rpc GetBankAccount(GetBankAccountRequest) returns (GetBankAccountResponse);
  // List bank accounts
  rpc ListBankAccounts(ListBankAccountsRequest) returns (ListBankAccountsResponse);
  // Update bank account
  rpc UpdateBankAccount(UpdateBankAccountRequest) returns (UpdateBankAccountResponse);
  // Start a bank reconciliation
  rpc CreateReconciliation(CreateReconciliationRequest) returns (CreateReconciliationResponse);
  // Get reconciliation by ID
  rpc GetReconciliation(GetReconciliationRequest) returns (GetReconciliationResponse);
  // List reconciliations
  rpc ListReconciliations(ListReconciliationsRequest) returns (ListReconciliationsResponse);
  // Approve a balanced reconciliation
  rpc ApproveReconciliation(ApproveReconciliationRequest) returns (ApproveReconciliationResponse);
}

// ─── Request/Response Messages ───────────────────────────────────────────────

message CreateAccountRequest {
  Account account = 1;
}

message CreateAccountResponse {
  Account account = 1;
}

message GetAccountRequest {
  string id = 1;
  repeated string include = 2; // Edge names to include
}

message GetAccountResponse {
  Account account = 1;
}

message ListAccountsRequest {
  int32 page_size = 1;
  string page_token = 2;
  string filter = 3;
  string order_by = 4;
}

message ListAccountsResponse {
  repeated Account accounts = 1;
  string next_page_token = 2;
  int32 total_count = 3;
}

message UpdateAccountRequest {
  Account account = 1;
  repeated string update_mask = 2; // Fields to update
}

message UpdateAccountResponse {
  Account account = 1;
}

message GetLedgerEntryRequest {
  string id = 1;
  repeated string include = 2; // Edge names to include
}

message GetLedgerEntryResponse {
  LedgerEntry ledger_entry = 1;
}

message ListLedgerEntriesRequest {
  int32 page_size = 1;
  string page_token = 2;
  string filter = 3;
  string order_by = 4;
}

message ListLedgerEntriesResponse {
  repeated LedgerEntry ledger_entrys = 1;
  string next_page_token = 2;
  int32 total_count = 3;
}

message CreateJournalEntryRequest {
  JournalEntry journal_entry = 1;
}

message CreateJournalEntryResponse {
  JournalEntry journal_entry = 1;
}

message GetJournalEntryRequest {
  string id = 1;
  repeated string include = 2; // Edge names to include
}

message GetJournalEntryResponse {
  JournalEntry journal_entry = 1;
}

message ListJournalEntriesRequest {
  int32 page_size = 1;
  string page_token = 2;
  string filter = 3;
  string order_by = 4;
}

message ListJournalEntriesResponse {
  repeated JournalEntry journal_entrys = 1;
  string next_page_token = 2;
  int32 total_count = 3;
}

message PostJournalEntryRequest {
  string id = 1;
  string approval_notes = 2;
}

message PostJournalEntryResponse {
  JournalEntry journal_entry = 1;
  repeated SideEffect side_effects = 2;
}

message VoidJournalEntryRequest {
  string id = 1;
  string reason = 2;
}

message VoidJournalEntryResponse {
  JournalEntry journal_entry = 1;
  repeated SideEffect side_effects = 2;
}

message CreateBankAccountRequest {
  BankAccount bank_account = 1;
}

message CreateBankAccountResponse {
  BankAccount bank_account = 1;
}

message GetBankAccountRequest {
  string id = 1;
  repeated string include = 2; // Edge names to include
}

message GetBankAccountResponse {
  BankAccount bank_account = 1;
}

message ListBankAccountsRequest {
  int32 page_size = 1;
  string page_token = 2;
  string filter = 3;
  string order_by = 4;
}

message ListBankAccountsResponse {
  repeated BankAccount bank_accounts = 1;
  string next_page_token = 2;
  int32 total_count = 3;
}

message UpdateBankAccountRequest {
  BankAccount bank_account = 1;
  repeated string update_mask = 2; // Fields to update
}

message UpdateBankAccountResponse {
  BankAccount bank_account = 1;
}

message CreateReconciliationRequest {
  Reconciliation reconciliation = 1;
}

message CreateReconciliationResponse {
  Reconciliation reconciliation = 1;
}

message GetReconciliationRequest {
  string id = 1;
  repeated string include = 2; // Edge names to include
}

message GetReconciliationResponse {
  Reconciliation reconciliation = 1;
}

message ListReconciliationsRequest {
  int32 page_size = 1;
  string page_token = 2;
  string filter = 3;
  string order_by = 4;
}

message ListReconciliationsResponse {
  repeated Reconciliation reconciliations = 1;
  string next_page_token = 2;
  int32 total_count = 3;
}

message ApproveReconciliationRequest {
  string id = 1;
}

message ApproveReconciliationResponse {
  Reconciliation reconciliation = 1;
  repeated SideEffect side_effects = 2;
}

