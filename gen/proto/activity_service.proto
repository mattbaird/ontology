// Code generated by cmd/apigen from CUE ontology. DO NOT EDIT.
syntax = "proto3";

package propeller.v1;

option go_package = "github.com/matthewbaird/ontology/gen/proto;propellerv1";

import "google/protobuf/timestamp.proto";

// ─── Common Types ────────────────────────────────────────────────────────────

message Money {
  int64 amount_cents = 1;
  string currency = 2; // ISO 4217
}

message Address {
  string line1 = 1;
  string line2 = 2;
  string city = 3;
  string state = 4;
  string postal_code = 5;
  string country = 6;
  double latitude = 7;
  double longitude = 8;
  string county = 9;
}

message DateRange {
  google.protobuf.Timestamp start = 1;
  google.protobuf.Timestamp end = 2;
}

message ContactMethod {
  string type = 1;
  string value = 2;
  bool primary = 3;
  bool verified = 4;
  bool opt_out = 5;
  string label = 6;
}

message SideEffect {
  string entity_type = 1;
  string entity_id = 2;
  string description = 3;
}

// ─── Entity Messages ─────────────────────────────────────────────────────────

// ─── Service Definition ──────────────────────────────────────────────────────

service ActivityService {
  // Get chronological activity feed for any entity. Use as FIRST call when assessing an entity.
  rpc GetEntityActivity(GetEntityActivityRequest) returns (GetEntityActivityResponse);
  // Get pre-aggregated signal summary for an entity with category breakdowns, sentiment, and escalations.
  rpc GetSignalSummary(GetSignalSummaryRequest) returns (GetSignalSummaryResponse);
  // Batch screen multiple entities ranked by concern level. Use for portfolio-wide risk assessment.
  rpc GetPortfolioSignals(GetPortfolioSignalsRequest) returns (GetPortfolioSignalsResponse);
  // Full-text search across all activity streams by keyword.
  rpc SearchActivity(SearchActivityRequest) returns (SearchActivityResponse);
}

// ─── Request/Response Messages ───────────────────────────────────────────────

message GetEntityActivityRequest {
  string id = 1;
  repeated string include = 2; // Edge names to include
}

message GetEntityActivityResponse {
  ActivityEntry activity_entry = 1;
}

message GetSignalSummaryRequest {
  string id = 1;
  repeated string include = 2; // Edge names to include
}

message GetSignalSummaryResponse {
  ActivityEntry activity_entry = 1;
}

message GetPortfolioSignalsRequest {
  ActivityEntry activity_entry = 1;
}

message GetPortfolioSignalsResponse {
  ActivityEntry activity_entry = 1;
}

message SearchActivityRequest {
  ActivityEntry activity_entry = 1;
}

message SearchActivityResponse {
  ActivityEntry activity_entry = 1;
}

