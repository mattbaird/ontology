// Code generated by cmd/apigen from CUE ontology. DO NOT EDIT.
syntax = "proto3";

package propeller.v1;

option go_package = "github.com/matthewbaird/ontology/gen/proto;propellerv1";

import "google/protobuf/timestamp.proto";

// ─── Common Types ────────────────────────────────────────────────────────────

message Money {
  int64 amount_cents = 1;
  string currency = 2; // ISO 4217
}

message Address {
  string line1 = 1;
  string line2 = 2;
  string city = 3;
  string state = 4;
  string postal_code = 5;
  string country = 6;
  double latitude = 7;
  double longitude = 8;
  string county = 9;
}

message DateRange {
  google.protobuf.Timestamp start = 1;
  google.protobuf.Timestamp end = 2;
}

message ContactMethod {
  string type = 1;
  string value = 2;
  bool primary = 3;
  bool verified = 4;
  bool opt_out = 5;
  string label = 6;
}

message SideEffect {
  string entity_type = 1;
  string entity_id = 2;
  string description = 3;
}

// ─── Entity Messages ─────────────────────────────────────────────────────────

message Organization {
  string id = 1;
  string legal_name = 2;
  string dba_name = 3;
  string org_type = 4;
  string tax_id = 5;
  string tax_id_type = 6;
  string status = 7;
  Address address = 8;
  repeated string contact_methods = 9;
  string state_of_incorporation = 10;
  google.protobuf.Timestamp formation_date = 11;
  string management_license = 12;
  string license_state = 13;
  google.protobuf.Timestamp license_expiry = 14;
  google.protobuf.Timestamp created_at = 15;
  google.protobuf.Timestamp updated_at = 16;
  string created_by = 17;
  string updated_by = 18;
  string source = 19;
}

message Person {
  string id = 1;
  string first_name = 2;
  string last_name = 3;
  string display_name = 4;
  google.protobuf.Timestamp date_of_birth = 5;
  string ssn_last_four = 6;
  repeated string contact_methods = 7;
  string preferred_contact = 8;
  string language_preference = 9;
  string timezone = 10;
  bool do_not_contact = 11;
  bool identity_verified = 12;
  string verification_method = 13;
  google.protobuf.Timestamp verified_at = 14;
  repeated string tags = 15;
  google.protobuf.Timestamp created_at = 16;
  google.protobuf.Timestamp updated_at = 17;
  string created_by = 18;
  string updated_by = 19;
  string source = 20;
}

message PersonRole {
  string id = 1;
  string person_id = 2;
  string role_type = 3;
  string scope_type = 4;
  string scope_id = 5;
  string status = 6;
  DateRange effective = 7;
  string attributes = 8;
  google.protobuf.Timestamp created_at = 9;
  google.protobuf.Timestamp updated_at = 10;
  string created_by = 11;
  string updated_by = 12;
  string source = 13;
}

// ─── Service Definition ──────────────────────────────────────────────────────

service PersonService {
  // Create a new person
  rpc CreatePerson(CreatePersonRequest) returns (CreatePersonResponse);
  // Get person by ID
  rpc GetPerson(GetPersonRequest) returns (GetPersonResponse);
  // List persons with filtering
  rpc ListPersons(ListPersonsRequest) returns (ListPersonsResponse);
  // Update person fields
  rpc UpdatePerson(UpdatePersonRequest) returns (UpdatePersonResponse);
  // Create a new organization
  rpc CreateOrganization(CreateOrganizationRequest) returns (CreateOrganizationResponse);
  // Get organization by ID
  rpc GetOrganization(GetOrganizationRequest) returns (GetOrganizationResponse);
  // List organizations
  rpc ListOrganizations(ListOrganizationsRequest) returns (ListOrganizationsResponse);
  // Update organization
  rpc UpdateOrganization(UpdateOrganizationRequest) returns (UpdateOrganizationResponse);
  // Assign a role to a person
  rpc CreatePersonRole(CreatePersonRoleRequest) returns (CreatePersonRoleResponse);
  // Get person role by ID
  rpc GetPersonRole(GetPersonRoleRequest) returns (GetPersonRoleResponse);
  // List person roles
  rpc ListPersonRoles(ListPersonRolesRequest) returns (ListPersonRolesResponse);
  // Activate a pending person role
  rpc ActivateRole(ActivateRoleRequest) returns (ActivateRoleResponse);
  // Deactivate an active person role
  rpc DeactivateRole(DeactivateRoleRequest) returns (DeactivateRoleResponse);
  // Terminate a person role
  rpc TerminateRole(TerminateRoleRequest) returns (TerminateRoleResponse);
}

// ─── Request/Response Messages ───────────────────────────────────────────────

message CreatePersonRequest {
  Person person = 1;
}

message CreatePersonResponse {
  Person person = 1;
}

message GetPersonRequest {
  string id = 1;
  repeated string include = 2; // Edge names to include
}

message GetPersonResponse {
  Person person = 1;
}

message ListPersonsRequest {
  int32 page_size = 1;
  string page_token = 2;
  string filter = 3;
  string order_by = 4;
}

message ListPersonsResponse {
  repeated Person persons = 1;
  string next_page_token = 2;
  int32 total_count = 3;
}

message UpdatePersonRequest {
  Person person = 1;
  repeated string update_mask = 2; // Fields to update
}

message UpdatePersonResponse {
  Person person = 1;
}

message CreateOrganizationRequest {
  Organization organization = 1;
}

message CreateOrganizationResponse {
  Organization organization = 1;
}

message GetOrganizationRequest {
  string id = 1;
  repeated string include = 2; // Edge names to include
}

message GetOrganizationResponse {
  Organization organization = 1;
}

message ListOrganizationsRequest {
  int32 page_size = 1;
  string page_token = 2;
  string filter = 3;
  string order_by = 4;
}

message ListOrganizationsResponse {
  repeated Organization organizations = 1;
  string next_page_token = 2;
  int32 total_count = 3;
}

message UpdateOrganizationRequest {
  Organization organization = 1;
  repeated string update_mask = 2; // Fields to update
}

message UpdateOrganizationResponse {
  Organization organization = 1;
}

message CreatePersonRoleRequest {
  PersonRole person_role = 1;
}

message CreatePersonRoleResponse {
  PersonRole person_role = 1;
}

message GetPersonRoleRequest {
  string id = 1;
  repeated string include = 2; // Edge names to include
}

message GetPersonRoleResponse {
  PersonRole person_role = 1;
}

message ListPersonRolesRequest {
  int32 page_size = 1;
  string page_token = 2;
  string filter = 3;
  string order_by = 4;
}

message ListPersonRolesResponse {
  repeated PersonRole person_roles = 1;
  string next_page_token = 2;
  int32 total_count = 3;
}

message ActivateRoleRequest {
  string id = 1;
}

message ActivateRoleResponse {
  PersonRole person_role = 1;
  repeated SideEffect side_effects = 2;
}

message DeactivateRoleRequest {
  string id = 1;
}

message DeactivateRoleResponse {
  PersonRole person_role = 1;
  repeated SideEffect side_effects = 2;
}

message TerminateRoleRequest {
  string id = 1;
}

message TerminateRoleResponse {
  PersonRole person_role = 1;
  repeated SideEffect side_effects = 2;
}

