// Code generated by cmd/apigen from CUE ontology. DO NOT EDIT.
syntax = "proto3";

package propeller.v1;

option go_package = "github.com/matthewbaird/ontology/gen/proto;propellerv1";

import "google/protobuf/timestamp.proto";

// ─── Common Types ────────────────────────────────────────────────────────────

message Money {
  int64 amount_cents = 1;
  string currency = 2; // ISO 4217
}

message Address {
  string line1 = 1;
  string line2 = 2;
  string city = 3;
  string state = 4;
  string postal_code = 5;
  string country = 6;
  double latitude = 7;
  double longitude = 8;
  string county = 9;
}

message DateRange {
  google.protobuf.Timestamp start = 1;
  google.protobuf.Timestamp end = 2;
}

message ContactMethod {
  string type = 1;
  string value = 2;
  bool primary = 3;
  bool verified = 4;
  bool opt_out = 5;
  string label = 6;
}

message SideEffect {
  string entity_type = 1;
  string entity_id = 2;
  string description = 3;
}

// ─── Entity Messages ─────────────────────────────────────────────────────────

message Portfolio {
  string id = 1;
  string name = 2;
  string owner_id = 3;
  string management_type = 4;
  bool requires_trust_accounting = 5;
  string trust_bank_account_id = 6;
  string status = 7;
  string default_late_fee_policy = 8;
  repeated string default_payment_methods = 9;
  int64 fiscal_year_start_month = 10;
  google.protobuf.Timestamp created_at = 11;
  google.protobuf.Timestamp updated_at = 12;
  string created_by = 13;
  string updated_by = 14;
  string source = 15;
}

message Property {
  string id = 1;
  string portfolio_id = 2;
  string name = 3;
  Address address = 4;
  string property_type = 5;
  string status = 6;
  int64 year_built = 7;
  double total_square_footage = 8;
  int64 total_units = 9;
  double lot_size_sqft = 10;
  int64 stories = 11;
  int64 parking_spaces = 12;
  string jurisdiction_id = 13;
  bool rent_controlled = 14;
  repeated string compliance_programs = 15;
  bool requires_lead_disclosure = 16;
  string chart_of_accounts_id = 17;
  string bank_account_id = 18;
  string insurance_policy_number = 19;
  google.protobuf.Timestamp insurance_expiry = 20;
  google.protobuf.Timestamp created_at = 21;
  google.protobuf.Timestamp updated_at = 22;
  string created_by = 23;
  string updated_by = 24;
  string source = 25;
}

message Unit {
  string id = 1;
  string property_id = 2;
  string unit_number = 3;
  string unit_type = 4;
  string status = 5;
  double square_footage = 6;
  int64 bedrooms = 7;
  double bathrooms = 8;
  int64 floor = 9;
  repeated string amenities = 10;
  string floor_plan = 11;
  bool ada_accessible = 12;
  bool pet_friendly = 13;
  bool furnished = 14;
  Money market_rent = 15;
  string active_lease_id = 16;
  int64 ami_restriction = 17;
  google.protobuf.Timestamp created_at = 18;
  google.protobuf.Timestamp updated_at = 19;
  string created_by = 20;
  string updated_by = 21;
  string source = 22;
}

// ─── Service Definition ──────────────────────────────────────────────────────

service PropertyService {
  // Create a new portfolio
  rpc CreatePortfolio(CreatePortfolioRequest) returns (CreatePortfolioResponse);
  // Get portfolio by ID
  rpc GetPortfolio(GetPortfolioRequest) returns (GetPortfolioResponse);
  // List portfolios
  rpc ListPortfolios(ListPortfoliosRequest) returns (ListPortfoliosResponse);
  // Update portfolio
  rpc UpdatePortfolio(UpdatePortfolioRequest) returns (UpdatePortfolioResponse);
  // Activate a portfolio after onboarding
  rpc ActivatePortfolio(ActivatePortfolioRequest) returns (ActivatePortfolioResponse);
  // Create a new property
  rpc CreateProperty(CreatePropertyRequest) returns (CreatePropertyResponse);
  // Get property by ID
  rpc GetProperty(GetPropertyRequest) returns (GetPropertyResponse);
  // List properties with filtering
  rpc ListProperties(ListPropertiesRequest) returns (ListPropertiesResponse);
  // Update property fields
  rpc UpdateProperty(UpdatePropertyRequest) returns (UpdatePropertyResponse);
  // Activate a property after onboarding
  rpc ActivateProperty(ActivatePropertyRequest) returns (ActivatePropertyResponse);
  // Create a new unit within a property
  rpc CreateUnit(CreateUnitRequest) returns (CreateUnitResponse);
  // Get unit by ID
  rpc GetUnit(GetUnitRequest) returns (GetUnitResponse);
  // List units with filtering
  rpc ListUnits(ListUnitsRequest) returns (ListUnitsResponse);
  // Update unit fields
  rpc UpdateUnit(UpdateUnitRequest) returns (UpdateUnitResponse);
}

// ─── Request/Response Messages ───────────────────────────────────────────────

message CreatePortfolioRequest {
  Portfolio portfolio = 1;
}

message CreatePortfolioResponse {
  Portfolio portfolio = 1;
}

message GetPortfolioRequest {
  string id = 1;
  repeated string include = 2; // Edge names to include
}

message GetPortfolioResponse {
  Portfolio portfolio = 1;
}

message ListPortfoliosRequest {
  int32 page_size = 1;
  string page_token = 2;
  string filter = 3;
  string order_by = 4;
}

message ListPortfoliosResponse {
  repeated Portfolio portfolios = 1;
  string next_page_token = 2;
  int32 total_count = 3;
}

message UpdatePortfolioRequest {
  Portfolio portfolio = 1;
  repeated string update_mask = 2; // Fields to update
}

message UpdatePortfolioResponse {
  Portfolio portfolio = 1;
}

message ActivatePortfolioRequest {
  string id = 1;
}

message ActivatePortfolioResponse {
  Portfolio portfolio = 1;
  repeated SideEffect side_effects = 2;
}

message CreatePropertyRequest {
  Property property = 1;
}

message CreatePropertyResponse {
  Property property = 1;
}

message GetPropertyRequest {
  string id = 1;
  repeated string include = 2; // Edge names to include
}

message GetPropertyResponse {
  Property property = 1;
}

message ListPropertiesRequest {
  int32 page_size = 1;
  string page_token = 2;
  string filter = 3;
  string order_by = 4;
}

message ListPropertiesResponse {
  repeated Property propertys = 1;
  string next_page_token = 2;
  int32 total_count = 3;
}

message UpdatePropertyRequest {
  Property property = 1;
  repeated string update_mask = 2; // Fields to update
}

message UpdatePropertyResponse {
  Property property = 1;
}

message ActivatePropertyRequest {
  string id = 1;
}

message ActivatePropertyResponse {
  Property property = 1;
  repeated SideEffect side_effects = 2;
}

message CreateUnitRequest {
  Unit unit = 1;
}

message CreateUnitResponse {
  Unit unit = 1;
}

message GetUnitRequest {
  string id = 1;
  repeated string include = 2; // Edge names to include
}

message GetUnitResponse {
  Unit unit = 1;
}

message ListUnitsRequest {
  int32 page_size = 1;
  string page_token = 2;
  string filter = 3;
  string order_by = 4;
}

message ListUnitsResponse {
  repeated Unit units = 1;
  string next_page_token = 2;
  int32 total_count = 3;
}

message UpdateUnitRequest {
  Unit unit = 1;
  repeated string update_mask = 2; // Fields to update
}

message UpdateUnitResponse {
  Unit unit = 1;
}

