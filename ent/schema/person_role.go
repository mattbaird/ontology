// Code generated by cmd/entgen from CUE ontology. DO NOT EDIT.
package schema

import (
	"entgo.io/ent"
	"entgo.io/ent/schema/edge"
	"entgo.io/ent/schema/field"
	"entgo.io/ent/schema/mixin"
	"github.com/google/uuid"
	"github.com/matthewbaird/ontology/internal/types"
)

// Ensure mixin import is used.
var _ mixin.Schema

// PersonRole holds the schema definition for the PersonRole entity.
type PersonRole struct {
	ent.Schema
}

// Mixin of the PersonRole.
func (PersonRole) Mixin() []ent.Mixin {
	return []ent.Mixin{
		AuditMixin{},
	}
}

// Fields of the PersonRole.
func (PersonRole) Fields() []ent.Field {
	return []ent.Field{
		field.UUID("id", uuid.UUID{}).Default(uuid.New).Immutable().Comment("Primary key"),
		field.Enum("role_type").Values("tenant", "owner", "property_manager", "maintenance_tech", "leasing_agent", "accountant", "vendor_contact", "guarantor", "emergency_contact", "authorized_occupant"),
		field.Enum("scope_type").Values("organization", "portfolio", "property", "unit", "lease"),
		field.String("scope_id").SchemaType(map[string]string{"postgres": "varchar"}),
		field.Enum("status").Values("active", "inactive", "pending", "terminated"),
		field.JSON("effective", &types.DateRange{}),
		field.JSON("attributes", &types.TenantAttributes{}).Optional(),
	}
}

// Edges of the PersonRole.
func (PersonRole) Edges() []ent.Edge {
	return []ent.Edge{
		edge.From("leases", Lease.Type).Ref("tenant_roles").Comment("Lease is held by tenant PersonRoles (inverse)"),
		edge.From("guaranteed_leases", Lease.Type).Ref("guarantor_roles").Comment("Lease is guaranteed by guarantor PersonRoles (inverse)"),
		edge.From("person", Person.Type).Ref("roles").Unique().Comment("Person has Roles in various contexts (inverse)"),
	}
}

// ValidPersonRoleTransitions defines the allowed state machine transitions.
// Generated from CUE ontology state_machines.cue.
var ValidPersonRoleTransitions = map[string][]string{
	"active":     {"inactive", "terminated"},
	"inactive":   {"active", "terminated"},
	"pending":    {"active", "terminated"},
	"terminated": {},
}
