// Code generated by cmd/entgen from CUE ontology. DO NOT EDIT.
package schema

import (
	"regexp"

	"entgo.io/ent"
	"entgo.io/ent/schema/edge"
	"entgo.io/ent/schema/field"
	"entgo.io/ent/schema/mixin"
	"github.com/google/uuid"
	"github.com/matthewbaird/ontology/internal/types"
)

// Ensure mixin import is used.
var _ mixin.Schema

// Account holds the schema definition for the Account entity.
type Account struct {
	ent.Schema
}

// Mixin of the Account.
func (Account) Mixin() []ent.Mixin {
	return []ent.Mixin{
		AuditMixin{},
	}
}

// Fields of the Account.
func (Account) Fields() []ent.Field {
	return []ent.Field{
		field.UUID("id", uuid.UUID{}).Default(uuid.New).Immutable().Comment("Primary key"),
		field.String("account_number").SchemaType(map[string]string{"postgres": "varchar"}),
		field.String("name").SchemaType(map[string]string{"postgres": "varchar"}),
		field.String("description").Optional().Nillable().SchemaType(map[string]string{"postgres": "varchar"}),
		field.Enum("account_type").Values("asset", "liability", "equity", "revenue", "expense"),
		field.Enum("account_subtype").Values("cash", "accounts_receivable", "prepaid", "fixed_asset", "accumulated_depreciation", "other_asset", "accounts_payable", "accrued_liability", "unearned_revenue", "security_deposits_held", "other_liability", "owners_equity", "retained_earnings", "distributions", "rental_income", "other_income", "cam_recovery", "operating_expense", "maintenance_expense", "utility_expense", "management_fee_expense", "depreciation_expense", "other_expense"),
		field.String("parent_account_id").Optional().Nillable().SchemaType(map[string]string{"postgres": "varchar"}),
		field.Int("depth"),
		field.JSON("dimensions", &types.AccountDimensions{}).Optional(),
		field.Enum("normal_balance").Values("debit", "credit"),
		field.Bool("is_header").Default(false),
		field.Bool("is_system").Default(false),
		field.Bool("allows_direct_posting").Default(true),
		field.Enum("status").Values("active", "inactive", "archived"),
		field.Bool("is_trust_account").Default(false),
		field.Enum("trust_type").Values("operating", "security_deposit", "escrow").Optional().Nillable(),
		field.Int64("budget_amount_amount_cents").Optional().Nillable().Comment("budget_amount — amount in cents"),
		field.String("budget_amount_currency").Optional().Nillable().Default("USD").Match(regexp.MustCompile(`^[A-Z]{3}$`)).Comment("budget_amount — ISO 4217 currency code"),
		field.String("tax_line").Optional().Nillable().SchemaType(map[string]string{"postgres": "varchar"}),
	}
}

// Edges of the Account.
func (Account) Edges() []ent.Edge {
	return []ent.Edge{
		edge.To("children", Account.Type).Comment("Account has sub-Accounts"),
		edge.From("parent", Account.Type).Ref("children").Unique().Comment("Account has sub-Accounts (inverse)"),
		edge.To("entries", LedgerEntry.Type).Comment("LedgerEntry posts to Account (inverse)"),
		edge.To("bank_accounts", BankAccount.Type).Comment("BankAccount is tracked via GL Account (inverse)"),
	}
}
