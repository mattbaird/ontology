// Code generated by cmd/entgen from CUE ontology. DO NOT EDIT.
package schema

import (
	"entgo.io/ent"
	"entgo.io/ent/schema/edge"
	"entgo.io/ent/schema/field"
	"entgo.io/ent/schema/mixin"
	"github.com/google/uuid"
	"github.com/matthewbaird/ontology/internal/types"
)

// Ensure mixin import is used.
var _ mixin.Schema

// Organization holds the schema definition for the Organization entity.
type Organization struct {
	ent.Schema
}

// Mixin of the Organization.
func (Organization) Mixin() []ent.Mixin {
	return []ent.Mixin{
		AuditMixin{},
	}
}

// Fields of the Organization.
func (Organization) Fields() []ent.Field {
	return []ent.Field{
		field.UUID("id", uuid.UUID{}).Default(uuid.New).Immutable().Comment("Primary key"),
		field.String("legal_name").SchemaType(map[string]string{"postgres": "varchar"}),
		field.String("dba_name").Optional().Nillable().SchemaType(map[string]string{"postgres": "varchar"}),
		field.Enum("org_type").Values("management_company", "ownership_entity", "vendor", "corporate_tenant", "government_agency", "hoa", "investment_fund", "other"),
		field.String("tax_id").Optional().Nillable().SchemaType(map[string]string{"postgres": "varchar"}),
		field.Enum("tax_id_type").Values("ein", "ssn", "itin", "foreign").Optional().Nillable(),
		field.Enum("status").Values("active", "inactive", "suspended", "dissolved"),
		field.JSON("address", &types.Address{}).Optional(),
		field.JSON("contact_methods", []types.ContactMethod{}).Optional(),
		field.String("state_of_incorporation").Optional().Nillable().SchemaType(map[string]string{"postgres": "varchar"}),
		field.Time("formation_date").Optional().Nillable(),
		field.String("management_license").Optional().Nillable().SchemaType(map[string]string{"postgres": "varchar"}),
		field.String("license_state").Optional().Nillable().SchemaType(map[string]string{"postgres": "varchar"}),
		field.Time("license_expiry").Optional().Nillable(),
	}
}

// Edges of the Organization.
func (Organization) Edges() []ent.Edge {
	return []ent.Edge{
		edge.To("owned_portfolios", Portfolio.Type).Comment("Portfolio is owned by Organization (inverse)"),
		edge.From("people", Person.Type).Ref("organizations").Comment("Person is affiliated with Organizations (inverse)"),
		edge.To("subsidiaries", Organization.Type).Comment("Organization has subsidiary Organizations"),
		edge.From("parent_org", Organization.Type).Ref("subsidiaries").Unique().Comment("Organization has subsidiary Organizations (inverse)"),
	}
}

// ValidOrganizationTransitions defines the allowed state machine transitions.
// Generated from CUE ontology state_machines.cue.
var ValidOrganizationTransitions = map[string][]string{
	"active":    {"inactive", "suspended", "dissolved"},
	"dissolved": {},
	"inactive":  {"active", "dissolved"},
	"suspended": {"active", "dissolved"},
}
